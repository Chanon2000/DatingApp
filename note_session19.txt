[Introduction]
    1. Prepare he app for publication
    2. What to consider before publishing
    3. Switching DBs
    4. Serving static content from the API server.
    5. Publishing to Heroku (Free!)
    6. Integrating Heroku to GitHub
    7. Using git branches

[What to consider when publishing]
    1. Environment variables
    2. Localhost
    3. CORS - if hosting the client app in different domain => ต้องคำนึงเมื่อคุณ host client กับ api คนละ domain
    4. Database => เนื่องจากเราใช้ entity framework นั้นทำให้สิ่งที่เราต้องคิดมีแค่เรื่องเดียวคือ entity framework support database server ที่เราจะใช้หรือป่าว
    เช่น คุณไม่ควรใช้ NoSql database (เช่น MongoDB) เพราะมันไม่ใช่ relational ซึ่ง entity framework คือ object relational mapper
    5. Cost
    6. Capacity / scalability
    7. Seed data
    8. Fake delays! => คนต้องลบมันด้วย

[Preparing the angular app and serving this from the API server]
- "ng build"
- เมื่อ build เสร็จลองแค่ "dotnet watch run" แล้วลองเข้า https://localhost:5001/ คุณก็จะเห็นหน้าเว็ปเลย โดยที่ไม่ได้ run "ng s" 
- ปัญหาตอนนี้ก็คือเมื่อยิง https://localhost:5001/members api มันจะไม่รู้จัก route นี้

[Creating an angular production build]
เราจะมาจัดการเรื่อง file size พวก vendor.js, styles.js (ดูได้ตรงส่วนของ network)

link การ deploy ของ angular
https://angular.io/guide/deployment#production-optimizations ที่ Production optimizations

- "ng build --prod" => "--prod" จะทำการ run ทุก optimizations ที่เราอ่านตาม link ซึ่งทำให้ file ต่างๆซึ่งอาจไม่ได้ชื่อเดิมเล็กลง
- เมื่อดูที่ console เราจะไม่เห็นอะไรใน development mode เลย 


[Switching the DB Server to PostGres]
list ของ database ที่ใช้งานได้ใน entity framework
https://docs.microsoft.com/en-us/ef/core/providers/?tabs=dotnet-core-cli

เดี๋ยวเราจะเปลี่ยนมาใช้ PostgreSQL เพราะ heroku ให้มา

และเราจะrun PostgreSQL บน docker โดยการ load image มาจาก docker hub
https://hub.docker.com/_/postgres

"docker run --name dev -e POSTGRES_USER=appuser -e POSTGRES_PASSWORD=Pa$$w0rd -p 5432:5432 -d postgres:latest"

ตัว GUI ของ PostgreSQL
https://www.pgadmin.org/